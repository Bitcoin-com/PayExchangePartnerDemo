import requests
import json

# ======== Hard coded test data ========
api_key = "dF7z7xskE17aYBUAm5T7F1x8esRpMFJP"

quote_request_1 = {
  "apiKey": "dF7z7xskE17aYBUAm5T7F1x8esRpMFJP",
  "fiatAmount": "20",
  "currency": "EUR",
  "destAccount": {
    "type": "BANK",
    "accountHolder": "SVEN SVENSSON",
    "country": "SE",
    "accountHolderAddress": { "address1": "Box 1234", "postalcode": 1234 },
    "accountNumber": "SE7160000000000123456789",
    "routingNumber": "HANDSESS"
  }
}

quote_request_2 = {
  "apiKey": "dF7z7xskE17aYBUAm5T7F1x8esRpMFJP",
  "fiatAmount": "80",
  "currency": "USD",
  "destAccount": {
    "type": "EXCHANGE",
    "accountNumber": "b3cffad0-b510-44da-80db-195c9b7c1ae3",
  }
}

raw_transaction = "0100000019cdd32c331df742afbb0c3e8977286b151e003c4ea42df580955e47aeb3d378000400000064419209777889f679c4c8a54ec5fd94acea3df47be9cf87d83fa3bb9506e0f80a2223aceb48239991190e7225dd99e5c9f56d4a47cafe467f85148c2d5e05309ede412103e33e7f055b5053b0ae043dcb7a9c03be4c18e54a3c210c0f2e494adfcce77c07fefffffff4b66a1622efb1169252757d218a974b34582e04898e84b3d1f23a340ae32c090000000064416ba7ed8d58fba945310beb55ad2709c79c55083d74261fca285b6c22c82a233a6097024d227ab178a5231c99eb8d8f4748facdb60ee437440cc0dcdad7293ece4121020ecd9c15aaf0fda3172fe0a81dba56aff1545d32e19ba4ebb0703de7a490a910feffffff90c30d502c2c1b2406bcc399f6c98c188363a4e3566ae3c0800dca394c56ff0b04000000644125782afa1ec3bff6486f3c9526c6cf18ed0f313a0980be3d24c4158f9be8c7496dfb1394817d294d852be0f06bcdbf4a4cde847686125209d6b94af70fec289a412102cfa2d5781200dc87d4159a370988508cd587f907fae11d220c9fc08634154722feffffff18c4ef33c6fc2e8a2599f2f9b42584ac61c9d097b40a6aab9f5d1532558cc00e030000006441356bd47eb78079a864add4f6da6cb61fafb4d643c69e7efa1c62e4854a5cf9255a360efdda466b74b03e5e8adafa587beab30bcec118238c4020833b4eec1361412102c4593bdbda9b40956b6b8e279862e0bf4a647ce01de63b80ce4ad4e8225b2dacfeffffff09c5c2a07849c5d55178113a3950a001ec50f3fa8d819c883d01b5309af8810f02000000644116f0c0a58eb55ceaf2e1181f2099a2c6a0c3ade8d6a895a12734ef35935167984a4f8464f8c6ff3aa4838c04b784ab96d77cc0469053f9b9eee49478aa8b227041210329d933b0fd6b6d20d9bdd1fef5644296d50adab0053eb647b863fcc47d78302dfeffffff53bb51f9c8aefe2dfa1606245406e6868b1a56cb758ba11c89934746bcbdbd14000000006441023a08405406a7a34b3021d5a4e5d6aa7f245edfbd69965824fc4d77b34f3edf0bea619e9347a282dbc9813edb9438cad81fd9a9ca95b542e9eb72a2001075c1412103c59fd23796d54317e821b6c41e3995e92a60274b00ce9343665373ae463ae3ddfeffffffdf35522ab2e2929bcbd869d31bfeb4eefdcc6ba6e3ec147dec358b2582bd501c01000000644125b9c695a6ab245d92f8150dbf97edb19f5af2b802915ae66133d6f9b6eda5f384997b218afb46c00ba9b004889f468bf2dd62e3c910f282f291e6e4dfe4f95e412103b48955f07a650a77d253357447c6a292815ce3f39757ec70fa63b513c37808c7fefffffff86d6355fa9d8b57b049f83dbceea355f01e647d99dd85be594bb39cc671de460200000064417b1e28e8acb71b2f5d118c0cc2067e1c570b1a8816fea9ee332d773f55d27580ab9b8c07c0d0eab4b80deaa97c9832c6be0ba99ab0625e935b92bac4591207874121033ea664527fbca1151ac2091cb545031695e56b0a75becd5b20b3d18d9af2311ffeffffff0320a1d52815fc39d0518b8ab65c4cab8a74831e92a5a6c05a892e77a7c8764f030000006441b8001f29823255187bb982f31299a423fb030979d8858be27e0208d4b0cc7939c9c82aadf769ee5b9b20b084c02f74ba2d70122831b8f3a8315ab3c1e0d2994b4121032f63a7be86a5b8a26f1500e57edf69aa875fa9ec97d823f2c958ab6bdaaad876feffffff81299118dd6e812fd91655e655059deaa1e035ae3a57c0878bece7bf5bb2605102000000644146146ff381757235a12ca4b94173c14ffa93e1c6f61c93954e25e1a3e217be2192396ae8508896b29783b1082e1004bc89e36f482ae2d2ebc0e68348e3346729412102682cf3aa04da8f00935f98f3c31f4ee65c56eedc64522e305ca0d00ce532dff0feffffffa7fc629ad913538a8f94e40b28471ee5af56f8096691159b12b696c62681a959000000006441a3be98836550bcf321e4532a2135190fef8ab92b0f0735ba8ae98f02a87c6fea6b151240ee2ff1610fb4ef5b78086e4e4de067c7c8d845971dc98b4a59f6ddca41210353ae35d2e3318f8db7c9fd5b259ada01ffaa486a8d3b0b33b5ab7517ce4c82dcfeffffff28c8c950fa4365fcbe6fad2113c33fdf6c6d1f1d59ebe7c693c37e9803d9ca5c010000006441e1ce7f0b09c582e31b71226b2b1b9370cee8010eea235e65818c99735a0714cb738c2328e794d1c9942d92215b0259b65a333a2e92feaa7b1b70d726b5cf21744121027172c279401ec37d90a49170a86a8673e88c47cde461af4de8b3994d27834b92feffffff05975640100c8c04f87739ee0ea63cd700c2fbf07856258f8decdb0bba6a9f66020000006441b0d5288985a280e92a1ee86de3f5e4596ffea5eaefbb1d5ae2f352eefeeb9bbbb64bf8576057af983eb966754a23e7ffc050c9fbbd9646b5a497cadee720a98d4121035e20c1ef67499178c1c20724ca388914b15b2e7aa8514fdec10cd0167799a871feffffffb1af5550f3fa723366c6d4711895d053be7818363077c6729c7ba026ab65f487000000006441b95b485c76946e6d905ede3d720781ea1fed4eb8c335f8175a8c4e84d7fe2e514939a14c94d0cd02792ad3023e40d5df9e401f71c5f22feb6fe38aac589ad3dc41210340dab1b559e518ca3c3ba9bb3f987b019abebbda4ed98924483897d90757fe36feffffffa3d8a8982ad330f518a8acf63be75f5b5a729dc749adbeace6cf8d63750e878d03000000644160b8ba0dd0fba7d9ee3987a4626ea4d20f1dac610d8c653611b6df4a9ccf1daff7e6ea771b354f8a8a242183fc153af7e7f79b51bd5fab7b1fe13ac90703aa03412102329b9081d0da1edefc943a00a95a978d0b7a1eee14f4c67b4ecd87ff8eb22483feffffff9b0b993b8db77242e74140ee562c1fa733e661cda3fd9aeeab08896d56bdf99f000000006441c89012f0047d9840b523388b9a326c717da615428cce08ff0b75066865b2358376ab350296f36db7c8a30f7abddad85a02482b3159cf04da0320da72517df16b412102ff1938c4db9e590d39e650cf47165ee4ccc7d2466c650f2ba4ae8b19c0b98888feffffffb7db38b35f7a580f8b2339b7c8925e906d8cd88055910512e796dd8a2c164fa1020000006441a21e6c0bd3a8e7ab3e9b78cd47b4a89b0cd2f7669060a996a9261716d1ac667c7c04bb074ee9bd6e303e1215ba162ed7a8c309658483961ea0f01123aa6ba0e7412103e9064be236cfe5b63273300ece9b74b5882a54f05a896fe9715a68b294505d5efeffffffec873c5ebbad80d487b539f91a68a7af074dd2b39cd9692cb248b2c8214b33ab010000006441c8c9f5febca4824de2b9ddb2201482b17a19c95890e5acc40fa80106d2ac64bcb07ad6b1cf3b7ffaf4289706357035f7660520220924f6e51211256832cfc70441210383c6abd7130a5ffdf8438d403d99fe5a2642f7ce53174a7c1fecf8b3a9858ebefeffffff3f681ff4e9a0eba3a5ed214f427738c4508ea283f08679c1693bf08534d28eb80000000064416f39b57508448bdf392d62db06dae97845584b5b5e3a4f504808cbae9b8cc9a01a6a340289212edfcb788510982d972f73fb7f332ee0bc21bdc8b7a05fbc346941210286d62c3776ae41a3f55f039681e3e051d6aff2567a0c881bb7040402617e09e0feffffffc6fcea93c07a186a1e173bb6a33b091496e819a2134f4fb59e11c036b4c4e0bf0000000064411025efe9cfc592994206acfa11b12a14231d002ca836aa3e46bcc9cc167b65e30f1f4e8b952e5e49ca9ee993b8831a0a85eebaca9e59514f32948848188a79564121038d1748846b0be16a267b23128bc9b854f0f929acc8a7838b61b2b9205b0325cafeffffff32b3729d6707a1158d91e44ad23ec5d521571783305f584d295de97003bb86cb030000006441536ffd7557e836066f0330c0e8e7c216bdcd2bc52f5cec57e069851d39b15826ac9d5ff96cbf2f913fcfd5746d2048bbeda72111aba4a5faae917874943d2ac741210207e98ddeb785c4939a46d927f133399965242bdf5a50cf4c6991f03e614e60a8feffffffab818f9a1397e23c8deeb44f1767d6b8bd7f7295835e46066d6081adf602d1de010000006441ad0990b38ed0278f486ad5b926578a3b5a1596eb3897227683dfb758aa55d8e8ed24ac8c2194499379fa01a1064da981cfcfa102930b9c4bb238530fdeb45bf7412103f77f6cc27cbc0e8c0b4723cfd44984e671d4285edd42025ab9eb2de3a863745bfeffffff97c27de015291c258de74d9a8ce0cab337aa4535b29780f27f7959eeb63cf5df03000000644128dfdf498e6aaaefb15a9b1869d78bbe55d7b0d61750641e74bcdf725250f34dbb006e39db928b2833ddfdb4946509224b47cd5460f47c49d526ed0d66c8cafc412103d5d03a64b404d7f3e11030d72cbe1c8d13e266e506f3f5d6c70a775bf79e751dfeffffff16598a0efc64e030485fa1667493001376fc9ae8be6ba77ae77ef8a4be2f6ee70300000064419ff4e71db558778ffe3e13dc2d3fb36bb3801ff110c9c76653920ce42ea1ed42cd0fa93a1858077dd53536a626bd407575c413668e1c2c2fa49e0d4b5e9d2798412103b74d03f594ca297b5b0545f0c57e62653af6e0dd10f698945f53b9b0fd26b5b5feffffff42f6ebe965a8d65ccad5e1bd16e41d08c2cd5f0418de5dd24d841918afe6c1f0020000006441e4e20d65421388bf409229defc725209df1fea1bbf3ec9cf5209469d42ec4094402cd6b73aabfa1a5cef1a1fc3423fb45db16978b9cd53b61f731424c126d7a84121037113e61d142ea62ac43714983edb22ee93da88f6759fffedb22b942a2dee3a7afeffffff02b0750200000000001976a9143f6f09212b5cea8189a70c199389c0e4f3b02efa88ac005a6202000000001976a914eb7cad3be0e0cdd468727f2ebb974d69785feb7188ac50680900";


print("Requesting a quote for $80 USD")

response = requests.post('http://localhost:8080/api/get-quote', json=quote_request_2, headers = {'X-API-Key': api_key})
print("Got status code {}".format(response.status_code))
print(response.json())

quote_acceptance = {
    "quoteId": response.json()["quoteId"],
    "rawTx": raw_transaction
}
response = requests.post('http://localhost:8080/api/accept-quote', json=quote_acceptance, headers = {'X-API-Key': api_key})
print("Got status code {}".format(response.status_code))
print(response.json())
