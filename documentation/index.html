
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Bitcoin.com Pay Fiat Partner API</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen-a1ce949a.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-bccf8c07.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-c5541673.js"></script>
  </head>

  <body class="index" data-languages="[&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-691ddb43.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#offer-flow" class="toc-h1 toc-link" data-title="Offer flow">Offer flow</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#request-offer" class="toc-h2 toc-link" data-title="Request offer">Request offer</a>
                  </li>
                  <li>
                    <a href="#accept-offer" class="toc-h2 toc-link" data-title="Accept offer">Accept offer</a>
                  </li>
                  <li>
                    <a href="#get-offer-status" class="toc-h2 toc-link" data-title="Get offer status">Get offer status</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Bitcoin.com Example Server API documentation.</p>

<p><code><img src="images/flow-3b8b22fe.png" /></code></p>
<h1 id='offer-flow'>Offer flow</h1><h2 id='request-offer'>Request offer</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">offer_request_example_1</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"inputAsset"</span><span class="p">:</span> <span class="s">"BCH"</span><span class="p">,</span>
  <span class="s">"outputAsset"</span><span class="p">:</span> <span class="s">"EUR"</span><span class="p">,</span>
  <span class="s">"outputAmount"</span><span class="p">:</span> <span class="s">"80"</span><span class="p">,</span>
  <span class="s">"destAccount"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"BANK"</span><span class="p">,</span>
    <span class="s">"accountNumber"</span><span class="p">:</span> <span class="s">"GB05REVO00990183264583"</span><span class="p">,</span>
    <span class="s">"routingNumber"</span><span class="p">:</span> <span class="s">"REVOGB21"</span><span class="p">,</span>
    <span class="s">"accountHolder"</span><span class="p">:</span> <span class="s">"SATOSHI NAKAMOTO"</span><span class="p">,</span>
    <span class="s">"country"</span><span class="p">:</span> <span class="s">"GB"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">offer_request_example_2</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"inputAsset"</span><span class="p">:</span> <span class="s">"BCH"</span><span class="p">,</span>
  <span class="s">"outputAsset"</span><span class="p">:</span> <span class="s">"USD"</span><span class="p">,</span>
  <span class="s">"outputAmount"</span><span class="p">:</span> <span class="s">"80"</span><span class="p">,</span>
  <span class="s">"destAccount"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"EXCHANGE"</span><span class="p">,</span>
    <span class="s">"accountNumber"</span><span class="p">:</span> <span class="s">"000736353815183"</span><span class="p">,</span>
    <span class="s">"routingNumber"</span><span class="p">:</span> <span class="s">"LIQUIDCOM"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">offer_request_example_3</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"inputAsset"</span><span class="p">:</span> <span class="s">"BCH"</span><span class="p">,</span>
  <span class="s">"outputAsset"</span><span class="p">:</span> <span class="s">"USDH"</span><span class="p">,</span>
  <span class="s">"outputAmount"</span><span class="p">:</span> <span class="s">"50"</span><span class="p">,</span>
  <span class="s">"destAccount"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"SLP"</span><span class="p">,</span>
    <span class="s">"accountNumber"</span><span class="p">:</span> <span class="s">"qpxjh5nru6u2sfcg9zwddcu8zpmjwlmzlcsnpq5jye"</span><span class="p">,</span>
    <span class="s">"routingNumber"</span><span class="p">:</span> <span class="s">"BITCOINCASH"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://exampleexchange.com/api/v1/request-offer'</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">offer_request_example_2</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-API-Key'</span><span class="p">:</span> <span class="n">api_key</span><span class="p">})</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"ACCEPTED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"offerId"</span><span class="p">:</span><span class="s2">"f69ea2e5-015a-4211-96b3-cab996131296"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"expiry"</span><span class="p">:</span><span class="s2">"2020-01-13T02:31Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"directBroadcast"</span><span class="p">:</span><span class="err">True</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address"</span><span class="p">:</span><span class="s2">"1NU99mbAzvvXxg2UxcDhvNEQsRRZxEYz7M"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="mi">40000000</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Or if it wasn&#39;t accepted:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"DENIED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reason"</span><span class="p">:</span><span class="s2">"Minimum offer amount not met|Invalid FIAT currency|Invalid destination account|Destination account not eligible"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint is for getting a offer from the exchange. The merchant is expecting an exact amount of USD to be credited to their account. The Pay server will send a offer request to the exchange on how many BCH the exchange wants for $80. The exchange may choose to markup the price to mitigate market risks.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://exampleexchange.com/api/v1/request-offer</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>inputAsset</td>
<td>string</td>
<td>true</td>
<td>Asset to be sent.</td>
</tr>
<tr>
<td>outputAsset</td>
<td>string</td>
<td>true</td>
<td>Asset to receive, FIAT or crypto.</td>
</tr>
<tr>
<td>outputAmount</td>
<td>string</td>
<td>true</td>
<td>Amount of the output asset. FIAT or crypto.</td>
</tr>
<tr>
<td>destAccount</td>
<td>JSON</td>
<td>true</td>
<td>JSON object describing where the output asset will be sent.</td>
</tr>
</tbody></table>
<h4 id='destaccount-description'>destAccount description</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>true</td>
<td>Type enum string. Must be EXCHANGE, BANK, SLP</td>
</tr>
<tr>
<td>accountNumber</td>
<td>true</td>
<td>Destination account where to send money. Can be exchange account number, bank account (IBAN), SLP, etc.</td>
</tr>
<tr>
<td>accountHolder</td>
<td>false</td>
<td>Name of account holder. Useful if paying to IBAN.</td>
</tr>
<tr>
<td>country</td>
<td>false</td>
<td>Useful if paying to IBAN.</td>
</tr>
<tr>
<td>accountHolderAddress</td>
<td>false</td>
<td>Postal address of account holder. Useful if paying to IBAN.</td>
</tr>
<tr>
<td>routingNumber</td>
<td>false</td>
<td>BIC code or sort code. Useful if paying to IBAN.</td>
</tr>
</tbody></table>
<h2 id='accept-offer'>Accept offer</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">raw_transaction</span> <span class="o">=</span> <span class="s">"0100000019cdd32...889f679c4c8"</span>

<span class="n">offer_acceptance</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"offerId"</span><span class="p">:</span> <span class="s">"f69ea2e5-015a-4211-96b3-cab996131296"</span><span class="p">,</span>
    <span class="s">"rawTx"</span><span class="p">:</span> <span class="n">raw_transaction</span>
<span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://exampleexchange.com/api/v1/accept-offer'</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">offer_acceptance</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-API-Key'</span><span class="p">:</span> <span class="n">api_key</span><span class="p">})</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCEPTED"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"offerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f69ea2e5-015a-4211-96b3-cab996131296"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ok"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5bb52a5b4c80751f01bac8601184cdcc9bd2daa739a18d39caeb275cfb3521c2"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Or if it wasn&#39;t accepted:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"REJECTED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="s2">"Transaction not accepted by bitcoin node|Payment was less than expected|Paid more than expected|Offer has timed out"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint is for when Pay server sends the raw transaction to the exchange. The exchange will review the transaction and accept or reject it.
After the server replied with ACCEPTED and a txid, the transaction is broadcasted to the network.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST https://exampleexchange.com/api/v1/accept-offer</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offerId</td>
<td>string (UUID)</td>
<td>true</td>
<td>Unique UUID of the offer</td>
</tr>
<tr>
<td>rawTx</td>
<td>string (hex)</td>
<td>true</td>
<td>Signed raw transaction as hex</td>
</tr>
</tbody></table>
<h2 id='get-offer-status'>Get offer status</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://exampleexchange.com/api/v1/offer/{}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">offer_id</span><span class="p">),</span> <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-API-Key'</span><span class="p">:</span> <span class="n">api_key</span><span class="p">})</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OPEN"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"offerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f69ea2e5-015a-4211-96b3-cab996131296"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"expiry"</span><span class="p">:</span><span class="w"> </span><span class="mi">1578882697196</span><span class="p">,</span><span class="w">
  </span><span class="s2">"chain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BITCOINCASH"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"depositAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1NU99mbAzvvXxg2UxcDhvNEQsRRZxEYz7M"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"inputAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BCH"</span><span class="w">
  </span><span class="s2">"inputAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.4"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"outputAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"outputAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint gets a specific offer</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET https://exampleexchange.com/api/offer/&lt;ID&gt;</code></p>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ID</td>
<td>The ID of the offer</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<aside class="notice">
This error section is stored in a separate file in <code>includes/_errors.md</code>. Slate allows you to optionally separate out your docs into many files...just save them to the <code>includes</code> folder and add them to the top of your <code>index.md</code>'s frontmatter. Files are included in the order listed.
</aside>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- The kitten requested is hidden for administrators only.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified kitten could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a kitten with an invalid method.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- You requested a format that isn&#39;t json.</td>
</tr>
<tr>
<td>410</td>
<td>Gone -- The kitten requested has been removed from our servers.</td>
</tr>
<tr>
<td>418</td>
<td>I&#39;m a teapot.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
